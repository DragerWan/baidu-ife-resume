<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>timeout</title>
</head>

<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var reg = document.getElementById("fade-obj");
        var button = document.getElementById("fade-btn");
        reg.style.opacity = 1;
        function startFade(){
            button.disabled = true;
            if(reg.style.opacity == 1){
                fadeOut();
            }else{
                fadeIn();
            }
        }
        function fadeOut(){
            reg.style.opacity  = Math.max(reg.style.opacity - 0.1, 0);
            if(reg.style.opacity > 0){
                setTimeout(fadeOut, 50);
            } else {
                button.disabled = false;
                button.innerHTML = "淡入"
            }
        }
        function fadeIn(){
            reg.style.opacity  = Math.min(Number(reg.style.opacity) + 0.1, 1);
            if(reg.style.opacity < 1){
                setTimeout(fadeIn, 50);
            } else {
                button.disabled = false;
                button.innerHTML = "淡出"
            }
        }
        button.onclick = startFade;
    </script>
</body>

</html>